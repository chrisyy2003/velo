---
import { getSortedPosts, TagsGroup } from '~/utils'
import Layout from '~/layouts/Layout.astro'

const sortedPosts = await getSortedPosts()
const tagsGroup = await TagsGroup.build(sortedPosts)
const allTags = tagsGroup.sortCollationsLargest()

const meta = {
  description: "A list of all the topics I've written about in my posts",
  title: 'All Tags',
}
---

<Layout>
  <main class="max-w-4xl mx-auto px-4 py-8">
    <header class="mb-8">
      <h1 class="text-4xl font-bold text-white mb-4">Tags</h1>
      <p class="text-gray-400">All topics I've written about</p>
    </header>

    <div class="bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl px-8 py-6">
      <ul class="space-y-4">
        {
          allTags.map((tag) => (
            <li class="flex items-center gap-x-2">
              <a
                class="inline-block text-blue-400 hover:text-blue-300 transition-colors font-medium"
                href={tag.url}
                title={`View posts with the tag: ${tag.title}`}
              >
                #{tag.title}
              </a>
              <span class="inline-block text-gray-400">
                - {tag.entries.length} Post{tag.entries.length > 1 && 's'}
              </span>
            </li>
          ))
        }
      </ul>
    </div>
  </main>
</Layout>

<style>
  main {
    min-height: 100vh;
    background: linear-gradient(#9eaab0 0%, #0f172a 100%);
  }
</style>

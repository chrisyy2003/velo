---
import Layout from '../layouts/Layout.astro'
import PostCard from '../components/PostCard.astro'
import { getSortedPosts } from '../utils'

// 获取所有已发布的文章
const sortedPosts = await getSortedPosts()
// 获取最新的几篇文章用于首页展示
const recentPosts = sortedPosts.slice(0, 6)
---

<Layout title="我的博客 - 首页" description="欢迎来到我的个人博客">
  <main class="max-w-4xl mx-auto px-4 py-8">
    <!-- 页面标题 -->
    <header class="mb-12 text-center">
      <h1 class="text-5xl font-bold mb-4">欢迎来到我的博客</h1>
      <p class="text-xl max-w-2xl mx-auto">在这里分享我的想法、学习笔记和技术心得</p>
    </header>

    <!-- 最新文章 -->
    <section class="mb-12">
      <div class="flex items-center justify-between mb-8">
        <h2 class="text-3xl font-bold">最新文章</h2>
        <a
          href="/archive"
          class="text-blue-400 hover:text-blue-300 transition-colors flex items-center gap-2"
        >
          查看全部
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 5l7 7-7 7"></path>
          </svg>
        </a>
      </div>

      {
        recentPosts.length > 0 ? (
          <div class="space-y-6">
            {recentPosts.map((post) => (
              <PostCard entry={post} />
            ))}
          </div>
        ) : (
          <div class="bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-8 text-center">
            <p class="text-lg">暂无文章，敬请期待...</p>
          </div>
        )
      }
    </section>
  </main>
</Layout>
